import * as types from "../../store/project/types";
import { put } from "redux-saga/effects";
import { msalInstance } from "../../..";
import { GetDateNowUtc } from "../../../components/flow/helpers";

/**
 * Function to update a node with date and the user that made the update.
 * @param action
 */
export function* changeNodeUpdated(action) {
  const account = msalInstance?.getActiveAccount();

  yield put({
    type: types.CHANGE_NODE_UPDATED,
    payload: {
      nodeId: action.payload.nodeId,
      updated: GetDateNowUtc(),
      userName: account?.name ?? "",
    },
  });
}
